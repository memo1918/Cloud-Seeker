<table class="mat-table-background-pink" mat-table [dataSource]="shoppingCart.items">
  <ng-container matColumnDef="name">
    <th class="mat-table-background-white" mat-header-cell *matHeaderCellDef> Your configuration</th>
    <td mat-cell *matCellDef="let item">
      <mat-accordion>
        <mat-expansion-panel class="mat-table-background-pink">
          <mat-expansion-panel-header>
            <mat-panel-title>
              {{item.name}}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-panel-description>
            Quick description
          </mat-panel-description>
          <p>
            CPU: {{item.fields["cpu"].unit}} {{item.fields["cpu"].value}}
          </p>
          <p>
            Memory: {{item.fields["memory"].value}} {{item.fields["memory"].unit}}
          </p>
          <p>
            Storage: {{item.fields["storage"].value}} {{item.fields["storage"].unit}}
          </p>
        </mat-expansion-panel>
      </mat-accordion>
    </td>
  </ng-container>

  <ng-container matColumnDef="azure">
    <th class="mat-table-background-white" mat-header-cell *matHeaderCellDef> Azure</th>
    <td mat-cell *matCellDef="let item; index as i">
      <mat-radio-button [name]="'comparison-'+i" value="azure" (change)="selectedOption[i] = 'azure'">
        <mat-chip color="accent" [highlighted]="selectedOption[i]=='azure'">
          {{item.price["azure"].value}} {{item.price["gcp"].unit}}
        </mat-chip>
      </mat-radio-button>
      {{selectedOption}}
    </td>
  </ng-container>
  <ng-container matColumnDef="gcp">
    <th class="mat-table-background-white" mat-header-cell *matHeaderCellDef> GCP</th>
    <td mat-cell *matCellDef="let item;index as i">
      <mat-radio-button [name]="'comparison-'+i" value="gcp" (change)="selectedOption[i] = 'gcp'">
        <mat-chip color="accent" [highlighted]="selectedOption[i]=='gcp'">
          {{item.price["gcp"].value}} {{item.price["gcp"].unit}}
        </mat-chip>
      </mat-radio-button>
    </td>
  </ng-container>
  <ng-container matColumnDef="aws">
    <th class="mat-table-background-white" mat-header-cell *matHeaderCellDef> AWS</th>
    <td mat-cell *matCellDef="let item;index as i">
      <mat-radio-button [name]="'comparison-'+i" value="aws" (change)="selectedOption[i] = 'aws'">
        <mat-chip color="accent" [highlighted]="selectedOption[i]=='aws'">
          {{item.price["aws"].value}} {{item.price["gcp"].unit}}
        </mat-chip>
      </mat-radio-button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
  <tr mat-row *matRowDef="let item; columns: columnsToDisplay;"></tr>
</table>

