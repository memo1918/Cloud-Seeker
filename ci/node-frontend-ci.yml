test_frontend: # job
  image: atlassianlabs/docker-node-jdk-chrome-firefox:latest
  stage: test
  before_script:
    - cd frontend
    - npm install
  script:
    - npm run test-ci # testing
  artifacts:
    paths:
      - "frontend/coverage/**"
    expire_in: never

build_frontend: # job
  image: atlassianlabs/docker-node-jdk-chrome-firefox:latest
  stage: build
  before_script:
    - cd frontend
    - npm install
  script:
    - npm run build # building
  artifacts:
    paths:
      - "frontend/dist/**"
      - "frontend/artifacts/**"
    reports:
      coverage_report:
        coverage_format: cobertura
        path: "frontend/artifacts/coverage/frontend/cobertura-coverage.xml"
      junit: "frontend/artifacts/tests/**/*.xml"
    expire_in: never