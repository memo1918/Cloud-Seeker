test_frontend: # job
  image: atlassianlabs/docker-node-jdk-chrome-firefox:latest
  stage: test
  before_script:
    - cd frontend
    - npm install
  script:
    - npm run test-ci # testing
  artifacts:
    paths:
      - frontend/artifacts/**
    reports:
      coverage_report:
        coverage_format: cobertura
        path: frontend/artifacts/coverage/frontend/cobertura-coverage.xml
      junit: frontend/artifacts/tests/frontend/*.xml
    expire_in: never
  coverage: '/Lines \W+: (\d+\.\d+)%.*/'

build_frontend: # job
  image: atlassianlabs/docker-node-jdk-chrome-firefox:latest
  stage: build
  before_script:
    - cd frontend
    - npm install
  script:
    - npm run build # building
  artifacts:
    paths:
      - frontend/dist/**
    expire_in: never